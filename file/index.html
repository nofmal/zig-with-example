<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>File - Zig w/ Example</title><link rel=stylesheet href=../zig-with-example/a.min.css><link rel=icon href=../zig-with-example/favicon.ico sizes=any><link rel=icon href=../zig-with-example/icon.svg type=image/svg+xml><link rel=apple-touch-icon href=../zig-with-example/apple-touch-icon.png><link rel=manifest href=../zig-with-example/a.min.webmanifest><meta name=author content="Bagus Bimasakti"><meta name=description content="qwerty"><meta name=keywords content="file,input,output,i/o"><meta name=generator content="Hugo 0.89.4"><meta name=referrer content="no-referrer"><meta name=theme-color content="#212121"><meta property="og:title" content="File - Zig w/ Example"><meta property="og:url" content="https://nofmal.github.io/zig-with-example/file/"><meta property="og:image" content="https://nofmal.github.io/zig-with-example/opengraph.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="1024"><meta property="og:image:height" content="1024"><meta property="og:type" content="article"><meta name=twitter:card content="summary"><meta name=twitter:title content="File - Zig w/ Example"><meta name=twitter:description content="qwerty"><meta name=twitter:image content="https://nofmal.github.io/zig-with-example/opengraph.png"></head><body><header><h1><a href=../zig-with-example>Zig w/ Example</a>
- File</h1></header><main><article><h2 id=create-file><a href=#create-file>Create/write file</a></h2><p>Suppose we want to create a file named
<span class=monospace>sample.txt</span> in the current directory. To do
that you can do this:</p><div class=window><div class=title>file.zig</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-zig data-lang=zig><span class=kr>const</span><span class=w> </span><span class=n>std</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>@import</span><span class=p>(</span><span class=s>&#34;std&#34;</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>test</span><span class=w> </span><span class=s>&#34;Create/write file&#34;</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=kr>var</span><span class=w> </span><span class=n>file</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>try</span><span class=w> </span><span class=n>std</span><span class=p>.</span><span class=n>fs</span><span class=p>.</span><span class=n>cwd</span><span class=p>().</span><span class=n>createFile</span><span class=p>(</span><span class=s>&#34;sample.txt&#34;</span><span class=p>,</span><span class=w> </span><span class=p>.{});</span><span class=w>
</span><span class=w>    </span><span class=k>defer</span><span class=w> </span><span class=n>file</span><span class=p>.</span><span class=n>close</span><span class=p>();</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=n>_</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>try</span><span class=w> </span><span class=n>file</span><span class=p>.</span><span class=n>write</span><span class=p>(</span><span class=s>&#34;Hello, world!</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span><span class=w>
</span><span class=w>    </span><span class=n>_</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>try</span><span class=w> </span><span class=n>file</span><span class=p>.</span><span class=n>write</span><span class=p>(</span><span class=s>&#34;Nice day we&#39;re having today.</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span><span class=w>
</span><span class=w>    </span><span class=n>_</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>try</span><span class=w> </span><span class=n>file</span><span class=p>.</span><span class=n>write</span><span class=p>(</span><span class=s>&#34;What have you been up to lately?</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span><span class=w>
</span><span class=w>    </span><span class=n>_</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>try</span><span class=w> </span><span class=n>file</span><span class=p>.</span><span class=n>write</span><span class=p>(</span><span class=s>&#34;H-hey, why did you pull out that knife...?</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=kr>const</span><span class=w> </span><span class=n>Writer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>file</span><span class=p>.</span><span class=n>writer</span><span class=p>();</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=kr>const</span><span class=w> </span><span class=n>phone_number</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>911</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=k>try</span><span class=w> </span><span class=n>Writer</span><span class=p>.</span><span class=n>print</span><span class=p>(</span><span class=s>&#34;Help! Someone, please call {d}!</span><span class=se>\n\n</span><span class=s>&#34;</span><span class=p>,</span><span class=w> </span><span class=p>.{</span><span class=n>phone_number</span><span class=p>});</span><span class=w>
</span><span class=w></span><span class=p>}</span></code></pre></div></div><div class=window><div class=title>Terminal</div><pre class=terminal>$ zig test file.zig
All 1 tests passed.
$ cat sample.txt
Hello, world!
Nice day we're having today.
What have you been up to lately?
H-hey, why did you pull out that knife...?
Help me! Someone, please call 911!

$ <span class=blink>█</span></pre></div><h2 id=append-file><a href=#append-file>Append data to file</a></h2><p>However, <code>createFile()</code> by default will overwrite
the existing file. If you wish to append to the file instead,
do this:</p><div class=window><div class=title>file.zig</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-zig data-lang=zig><span class=p>....</span><span class=w>
</span><span class=w>    </span><span class=kr>var</span><span class=w> </span><span class=n>file</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>try</span><span class=w> </span><span class=n>std</span><span class=p>.</span><span class=n>fs</span><span class=p>.</span><span class=n>cwd</span><span class=p>().</span><span class=n>createFile</span><span class=p>(</span><span class=s>&#34;sample.txt&#34;</span><span class=p>,</span><span class=w> </span><span class=p>.{</span><span class=w> </span><span class=p>.</span><span class=n>truncate</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>false</span><span class=w> </span><span class=p>});</span><span class=w>
</span><span class=w>    </span><span class=c1>// or this:
</span><span class=c1></span><span class=w>    </span><span class=kr>var</span><span class=w> </span><span class=n>file</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>try</span><span class=w> </span><span class=n>std</span><span class=p>.</span><span class=n>fs</span><span class=p>.</span><span class=n>cwd</span><span class=p>().</span><span class=n>openFile</span><span class=p>(</span><span class=s>&#34;sample.txt&#34;</span><span class=p>,</span><span class=w> </span><span class=p>.{</span><span class=w> </span><span class=p>.</span><span class=n>write</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=p>});</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=k>defer</span><span class=w> </span><span class=n>file</span><span class=p>.</span><span class=n>close</span><span class=p>();</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=c1>// Set the current position of the file to the end.
</span><span class=c1></span><span class=w>    </span><span class=k>try</span><span class=w> </span><span class=n>file</span><span class=p>.</span><span class=n>seekFromEnd</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span><span class=w>
</span><span class=w>    </span><span class=p>....</span></code></pre></div></div><div class=window><div class=title>Terminal</div><pre class=terminal>$ zig test file.zig
All 1 tests passed.
$ cat sample.txt
Hello, world!
Nice day we're having today.
What have you been up to lately?
H-hey, why did you pull out that knife...?
Help me! Someone, please call 911!

Hello, world!
Nice day we're having today.
What have you been up to lately?
H-hey, why did you pull out that knife...?
Help me! Someone, please call 911!

$ <span class=blink>█</span></pre></div><h2 id=check-if-file-exists><a href=#check-if-file-exists>Check if a file exists</a></h2><p>One way to check whether a file exists or not is by calling
<code>openFile()</code> and catch if it returns an
<code>error.FileNotFound</code> instead.</p><div class=window><div class=title>file.zig</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-zig data-lang=zig><span class=c1>// Given the following list of files:
</span><span class=c1>// .
</span><span class=c1>// ├─ file.zig
</span><span class=c1>// └─ sample.txt
</span><span class=c1></span><span class=w>
</span><span class=w></span><span class=kr>const</span><span class=w> </span><span class=n>std</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>@import</span><span class=p>(</span><span class=s>&#34;std&#34;</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>fn</span><span class=w> </span><span class=n>fileExists</span><span class=p>(</span><span class=n>path</span><span class=o>:</span><span class=w> </span><span class=p>[]</span><span class=kr>const</span><span class=w> </span><span class=kt>u8</span><span class=p>)</span><span class=w> </span><span class=o>!</span><span class=kt>bool</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=kr>const</span><span class=w> </span><span class=n>file</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span><span class=p>.</span><span class=n>fs</span><span class=p>.</span><span class=n>cwd</span><span class=p>().</span><span class=n>openFile</span><span class=p>(</span><span class=n>path</span><span class=p>,</span><span class=w> </span><span class=p>.{})</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=o>|</span><span class=n>err</span><span class=o>|</span><span class=w> </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=n>err</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=k>error</span><span class=p>.</span><span class=n>FileNotFound</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=kc>false</span><span class=p>,</span><span class=w>
</span><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>err</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=p>};</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=n>file</span><span class=p>.</span><span class=n>close</span><span class=p>();</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=kc>true</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>test</span><span class=w> </span><span class=s>&#34;Check if a file exists&#34;</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=k>try</span><span class=w> </span><span class=n>std</span><span class=p>.</span><span class=n>testing</span><span class=p>.</span><span class=n>expect</span><span class=p>(</span><span class=k>try</span><span class=w> </span><span class=n>fileExists</span><span class=p>(</span><span class=s>&#34;sample.txt&#34;</span><span class=p>));</span><span class=w>
</span><span class=w>    </span><span class=k>try</span><span class=w> </span><span class=n>std</span><span class=p>.</span><span class=n>testing</span><span class=p>.</span><span class=n>expect</span><span class=p>(</span><span class=o>!</span><span class=k>try</span><span class=w> </span><span class=n>fileExists</span><span class=p>(</span><span class=s>&#34;does_not_exist.txt&#34;</span><span class=p>));</span><span class=w>
</span><span class=w></span><span class=p>}</span></code></pre></div></div><div class=window><div class=title>Terminal</div><pre class=terminal>$ zig test file.zig
All 1 tests passed.
$ <span class=blink>█</span></pre></div><h2 id=read-file><a href=#read-file>Read file</a></h2><p>To read a file and store its entire data inside a slice of bytes using
heap allocation, we do this:</p><div class=window><div class=title>file.zig</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-zig data-lang=zig><span class=kr>const</span><span class=w> </span><span class=n>std</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>@import</span><span class=p>(</span><span class=s>&#34;std&#34;</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=kr>pub</span><span class=w> </span><span class=k>fn</span><span class=w> </span><span class=n>main</span><span class=p>()</span><span class=w> </span><span class=o>!</span><span class=kt>void</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=kr>const</span><span class=w> </span><span class=n>allocator</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span><span class=p>.</span><span class=n>heap</span><span class=p>.</span><span class=n>page_allocator</span><span class=p>;</span><span class=w>
</span><span class=w>    </span><span class=kr>const</span><span class=w> </span><span class=n>max_size</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span><span class=p>.</span><span class=n>math</span><span class=p>.</span><span class=n>maxInt</span><span class=p>(</span><span class=kt>usize</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=kr>var</span><span class=w> </span><span class=n>data</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>try</span><span class=w> </span><span class=n>std</span><span class=p>.</span><span class=n>fs</span><span class=p>.</span><span class=n>cwd</span><span class=p>().</span><span class=n>readFileAlloc</span><span class=p>(</span><span class=n>allocator</span><span class=p>,</span><span class=w> </span><span class=s>&#34;sample.txt&#34;</span><span class=p>,</span><span class=w> </span><span class=n>max_size</span><span class=p>);</span><span class=w>
</span><span class=w>    </span><span class=k>defer</span><span class=w> </span><span class=n>allocator</span><span class=p>.</span><span class=n>free</span><span class=p>(</span><span class=n>data</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=kr>const</span><span class=w> </span><span class=n>printToStdout</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span><span class=p>.</span><span class=n>io</span><span class=p>.</span><span class=n>getStdOut</span><span class=p>().</span><span class=n>writer</span><span class=p>().</span><span class=n>print</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=n>printToStdout</span><span class=p>(</span><span class=s>&#34;{s}&#34;</span><span class=p>,</span><span class=w> </span><span class=p>.{</span><span class=n>data</span><span class=p>})</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>{};</span><span class=w>
</span><span class=w></span><span class=p>}</span></code></pre></div></div><div class=window><div class=title>Terminal</div><pre class=terminal>$ zig build-exe file.zig
$ ./file
Hello, world!
Nice day we're having today.
What have you been up to lately?
H-hey, why did you pull out that knife...?
Help! Someone, please call 911!

Hello, world!
Nice day we're having today.
What have you been up to lately?
H-hey, why did you pull out that knife...?
Help! Someone, please call 911!

$ <span class=blink>█</span></pre></div><h2 id=read-file-small-chunks><a href=#read-file-small-chunks>Read file in small chunks</a></h2><p>In case you're dealing with a huge file, or you simply just
want to read the file in certain bytes at a time, you can
instead use a stack-allocated buffer, like so:</p><div class=window><div class=title>file.zig</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-zig data-lang=zig><span class=kr>const</span><span class=w> </span><span class=n>std</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>@import</span><span class=p>(</span><span class=s>&#34;std&#34;</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=kr>pub</span><span class=w> </span><span class=k>fn</span><span class=w> </span><span class=n>main</span><span class=p>()</span><span class=w> </span><span class=o>!</span><span class=kt>void</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=kr>const</span><span class=w> </span><span class=n>file</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>try</span><span class=w> </span><span class=n>std</span><span class=p>.</span><span class=n>fs</span><span class=p>.</span><span class=n>cwd</span><span class=p>().</span><span class=n>openFile</span><span class=p>(</span><span class=s>&#34;sample.txt&#34;</span><span class=p>,</span><span class=w> </span><span class=p>.{});</span><span class=w>
</span><span class=w>    </span><span class=k>defer</span><span class=w> </span><span class=n>file</span><span class=p>.</span><span class=n>close</span><span class=p>();</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=kr>const</span><span class=w> </span><span class=n>printToStdout</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span><span class=p>.</span><span class=n>io</span><span class=p>.</span><span class=n>getStdOut</span><span class=p>().</span><span class=n>writer</span><span class=p>().</span><span class=n>print</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=kr>var</span><span class=w> </span><span class=n>buffer</span><span class=o>:</span><span class=w> </span><span class=p>[</span><span class=mi>64</span><span class=p>]</span><span class=kt>u8</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>undefined</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=c1>// Or use heap-allocated buffer instead.
</span><span class=c1></span><span class=w>    </span><span class=c1>//var buffer = try std.heap.page_allocator.alloc(u8, 64);
</span><span class=c1></span><span class=w>    </span><span class=c1>//defer std.heap.page_allocator.free(buffer);
</span><span class=c1></span><span class=w>
</span><span class=w>    </span><span class=kr>var</span><span class=w> </span><span class=n>file_size</span><span class=o>:</span><span class=w> </span><span class=kt>usize</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=kc>true</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=kr>const</span><span class=w> </span><span class=n>bytes_read</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>try</span><span class=w> </span><span class=n>file</span><span class=p>.</span><span class=n>read</span><span class=p>(</span><span class=o>&amp;</span><span class=n>buffer</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>bytes_read</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=p>)</span><span class=w>
</span><span class=w>            </span><span class=k>break</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w>        </span><span class=n>file_size</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>bytes_read</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w>        </span><span class=n>printToStdout</span><span class=p>(</span><span class=s>&#34;{s}&#34;</span><span class=p>,</span><span class=w> </span><span class=p>.{</span><span class=n>buffer</span><span class=p>[</span><span class=mi>0</span><span class=w> </span><span class=p>..</span><span class=w> </span><span class=n>bytes_read</span><span class=p>]})</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>{};</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=n>printToStdout</span><span class=p>(</span><span class=s>&#34;</span><span class=se>\n</span><span class=s>File size is {d} bytes</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span><span class=w> </span><span class=p>.{</span><span class=n>file_size</span><span class=p>})</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>{};</span><span class=w>
</span><span class=w></span><span class=p>}</span></code></pre></div></div><div class=window><div class=title>Terminal</div><pre class=terminal>$ zig build-exe file.zig
$ ./file
Hello, world!
Nice day we're having today.
What have you been up to lately?
H-hey, why did you pull out that knife...?
Help! Someone, please call 911!

Hello, world!
Nice day we're having today.
What have you been up to lately?
H-hey, why did you pull out that knife...?
Help! Someone, please call 911!


File size is 304 bytes
$ <span class=blink>█</span></pre></div><h2 id=read-write-file><a href=#read-write-file>Read/write file</a></h2><p>By default, all files opened with <code>openFile()</code> are
read-only. If you want to modify them, you have to pass the
option <code>.{ .write = true }</code> first.</p><div class=window><div class=title>file.zig</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-zig data-lang=zig><span class=kr>const</span><span class=w> </span><span class=n>std</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>@import</span><span class=p>(</span><span class=s>&#34;std&#34;</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>test</span><span class=w> </span><span class=s>&#34;Read/write file&#34;</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=kr>const</span><span class=w> </span><span class=n>file</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>try</span><span class=w> </span><span class=n>std</span><span class=p>.</span><span class=n>fs</span><span class=p>.</span><span class=n>cwd</span><span class=p>().</span><span class=n>openFile</span><span class=p>(</span><span class=s>&#34;sample.txt&#34;</span><span class=p>,</span><span class=w> </span><span class=p>.{</span><span class=w> </span><span class=p>.</span><span class=n>write</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span><span class=w> </span><span class=p>});</span><span class=w>
</span><span class=w>    </span><span class=k>defer</span><span class=w> </span><span class=n>file</span><span class=p>.</span><span class=n>close</span><span class=p>();</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=kr>const</span><span class=w> </span><span class=n>file_size</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>try</span><span class=w> </span><span class=n>file</span><span class=p>.</span><span class=n>getEndPos</span><span class=p>();</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=kc>true</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=kr>const</span><span class=w> </span><span class=n>current_position</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>try</span><span class=w> </span><span class=n>file</span><span class=p>.</span><span class=n>getPos</span><span class=p>();</span><span class=w>
</span><span class=w>
</span><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>current_position</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>4</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>file_size</span><span class=p>)</span><span class=w>
</span><span class=w>            </span><span class=k>break</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w>        </span><span class=k>try</span><span class=w> </span><span class=n>file</span><span class=p>.</span><span class=n>seekBy</span><span class=p>(</span><span class=mi>4</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w>        </span><span class=k>try</span><span class=w> </span><span class=n>file</span><span class=p>.</span><span class=n>writer</span><span class=p>().</span><span class=n>writeByte</span><span class=p>(</span><span class=s>&#39;a&#39;</span><span class=p>);</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w></span><span class=p>}</span></code></pre></div></div><div class=window><div class=title>Terminal</div><pre class=terminal>$ zig test file.zig
All 1 tests passed.
$ cat sample.txt
Hella, woald!
aice aay wa're aavina today.
Waat have yau bean upato latelya
H-hay, way dia youapullaout ahat anifea..?
aelp!aSomeane, aleasa cala 911a

Healo, aorlda
Nica dayawe'ra havang taday.aWhatahaveayou aeen ap toalateay?
Hahey,awhy aid yau pual oua thaa kniae...a
Hela! Soaeonea please call 9a1!

$ <span class=blink>█</span></pre></div><h2 id=delete-file><a href=#delete-file>Delete file</a></h2><p>Deleting a file is very easy.</p><div class=window><div class=title>file.zig</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-zig data-lang=zig><span class=c1>// Given the following list of files:
</span><span class=c1>// .
</span><span class=c1>// ├─ file.zig
</span><span class=c1>// └─ sample.txt
</span><span class=c1></span><span class=w>
</span><span class=w></span><span class=kr>const</span><span class=w> </span><span class=n>std</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>@import</span><span class=p>(</span><span class=s>&#34;std&#34;</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>test</span><span class=w> </span><span class=s>&#34;Delete file&#34;</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=n>std</span><span class=p>.</span><span class=n>fs</span><span class=p>.</span><span class=n>cwd</span><span class=p>().</span><span class=n>deleteFile</span><span class=p>(</span><span class=s>&#34;sample.txt&#34;</span><span class=p>)</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=o>|</span><span class=n>err</span><span class=o>|</span><span class=w> </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=n>err</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=k>error</span><span class=p>.</span><span class=n>FileNotFound</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=p>{},</span><span class=w>
</span><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=n>err</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=p>};</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=kr>const</span><span class=w> </span><span class=n>has_been_deleted</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span><span class=p>.</span><span class=n>fs</span><span class=p>.</span><span class=n>cwd</span><span class=p>().</span><span class=n>openFile</span><span class=p>(</span><span class=s>&#34;sample.txt&#34;</span><span class=p>,</span><span class=w> </span><span class=p>.{});</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=k>try</span><span class=w> </span><span class=n>std</span><span class=p>.</span><span class=n>testing</span><span class=p>.</span><span class=n>expectError</span><span class=p>(</span><span class=k>error</span><span class=p>.</span><span class=n>FileNotFound</span><span class=p>,</span><span class=w> </span><span class=n>has_been_deleted</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=p>}</span></code></pre></div></div><div class=window><div class=title>Terminal</div><pre class=terminal>$ zig test file.zig
All 1 tests passed.
$ <span class=blink>█</span></pre></div></article></main><footer>Copyright &#169; 2021 -
Bagus <span class=monospace>nofmal</span> Bimasakti
&#183; <a href=../zig-with-example>Home</a>
&#183; <a href=../zig-with-example/about/>About</a></footer></body></html>