<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Function - Zig w/ Example</title><link rel=stylesheet href=../a.min.css><link rel=icon href=../favicon.ico sizes=any><link rel=icon href=../icon.svg type=image/svg+xml><link rel=apple-touch-icon href=../apple-touch-icon.png><link rel=manifest href=../a.min.webmanifest><meta name=author content="Bagus Bimasakti"><meta name=description content="asdf"><meta name=generator content="Hugo 0.89.4"><meta name=referrer content="no-referrer"><meta name=theme-color content="#212121"><meta property="og:title" content="Function - Zig w/ Example"><meta property="og:url" content="https://zigwithexample.org/function/"><meta property="og:image" content="https://zigwithexample.org/opengraph.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="1024"><meta property="og:image:height" content="1024"><meta property="og:type" content="article"><meta name=twitter:card content="summary"><meta name=twitter:title content="Function - Zig w/ Example"><meta name=twitter:description content="asdf"><meta name=twitter:image content="https://zigwithexample.org/opengraph.png"></head><body><header><h1><a href=../>Zig w/ Example</a>
- Function</h1></header><main><article><h2 id=anonymous-function><a href=#anonymous-function>Anonymous function</a></h2><p>asdf.</p><h2 id=nested-function><a href=#nested-function>Nested function</a></h2><p>asdf.</p><div class=window><div class=title>function.zig</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-zig data-lang=zig><span class=kr>const</span><span class=w> </span><span class=n>std</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>@import</span><span class=p>(</span><span class=s>&#34;std&#34;</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>test</span><span class=w> </span><span class=s>&#34;Nested function with anonymous function&#34;</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=kr>const</span><span class=w> </span><span class=n>Writer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span><span class=p>.</span><span class=n>io</span><span class=p>.</span><span class=n>getStdOut</span><span class=p>().</span><span class=n>writer</span><span class=p>();</span><span class=w>
</span><span class=w>    </span><span class=n>Writer</span><span class=p>.</span><span class=n>print</span><span class=p>(</span><span class=s>&#34;</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span><span class=w> </span><span class=p>.{})</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>{};</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=n>makeList</span><span class=p>(</span><span class=n>Writer</span><span class=p>,</span><span class=w> </span><span class=s>&#34;. &#34;</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>fn</span><span class=w> </span><span class=n>makeList</span><span class=p>(</span><span class=n>Writer</span><span class=o>:</span><span class=w> </span><span class=n>std</span><span class=p>.</span><span class=n>fs</span><span class=p>.</span><span class=n>File</span><span class=p>.</span><span class=n>Writer</span><span class=p>,</span><span class=w> </span><span class=n>separator</span><span class=o>:</span><span class=w> </span><span class=p>[]</span><span class=kr>const</span><span class=w> </span><span class=kt>u8</span><span class=p>)</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=kr>const</span><span class=w> </span><span class=n>makeItem</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>struct</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=kr>var</span><span class=w> </span><span class=n>counter</span><span class=o>:</span><span class=w> </span><span class=kt>usize</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w>        </span><span class=k>fn</span><span class=w> </span><span class=n>makeItem</span><span class=p>(</span><span class=n>Wr</span><span class=o>:</span><span class=w> </span><span class=n>std</span><span class=p>.</span><span class=n>fs</span><span class=p>.</span><span class=n>File</span><span class=p>.</span><span class=n>Writer</span><span class=p>,</span><span class=w> </span><span class=n>sep</span><span class=o>:</span><span class=w> </span><span class=p>[]</span><span class=kr>const</span><span class=w> </span><span class=kt>u8</span><span class=p>,</span><span class=w> </span><span class=n>item</span><span class=o>:</span><span class=w> </span><span class=p>[]</span><span class=kr>const</span><span class=w> </span><span class=kt>u8</span><span class=p>)</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>            </span><span class=n>counter</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w>
</span><span class=w>            </span><span class=n>Wr</span><span class=p>.</span><span class=n>print</span><span class=p>(</span><span class=s>&#34;{d}{s}{s}</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span><span class=w> </span><span class=p>.{</span><span class=w> </span><span class=n>counter</span><span class=p>,</span><span class=w> </span><span class=n>sep</span><span class=p>,</span><span class=w> </span><span class=n>item</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=k>return</span><span class=p>;</span><span class=w>
</span><span class=w>        </span><span class=p>}</span><span class=w>
</span><span class=w>    </span><span class=p>}.</span><span class=n>makeItem</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=n>makeItem</span><span class=p>(</span><span class=n>Writer</span><span class=p>,</span><span class=w> </span><span class=n>separator</span><span class=p>,</span><span class=w> </span><span class=s>&#34;first&#34;</span><span class=p>);</span><span class=w>
</span><span class=w>    </span><span class=n>makeItem</span><span class=p>(</span><span class=n>Writer</span><span class=p>,</span><span class=w> </span><span class=n>separator</span><span class=p>,</span><span class=w> </span><span class=s>&#34;second&#34;</span><span class=p>);</span><span class=w>
</span><span class=w>    </span><span class=n>makeItem</span><span class=p>(</span><span class=n>Writer</span><span class=p>,</span><span class=w> </span><span class=n>separator</span><span class=p>,</span><span class=w> </span><span class=s>&#34;third&#34;</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=p>}</span></code></pre></div></div><div class=window><div class=title>Terminal</div><pre class=terminal>$ zig test variadic_function.zig
Test [1/1] test "Nested function with anonymous function"...
1. first
2. second
3. third
All 1 tests passed.
$ <span class=blink>█</span></pre></div><h2 id=variadic-function><a href=#variadic-function>Variadic function</a></h2><p>asdf.</p><div class=window><div class=title>function.zig</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-zig data-lang=zig><span class=kr>const</span><span class=w> </span><span class=n>std</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>@import</span><span class=p>(</span><span class=s>&#34;std&#34;</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=kr>const</span><span class=w> </span><span class=n>expect</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span><span class=p>.</span><span class=n>testing</span><span class=p>.</span><span class=n>expect</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>test</span><span class=w> </span><span class=s>&#34;Variadic function&#34;</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=kr>var</span><span class=w> </span><span class=n>twelve</span><span class=o>:</span><span class=w> </span><span class=kt>u8</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>12</span><span class=p>;</span><span class=w>
</span><span class=w>    </span><span class=kr>var</span><span class=w> </span><span class=n>fifty_one</span><span class=o>:</span><span class=w> </span><span class=kt>u8</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>51</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=kr>const</span><span class=w> </span><span class=n>foo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sum</span><span class=p>(</span><span class=kt>u8</span><span class=p>,</span><span class=w> </span><span class=p>.{</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=n>twelve</span><span class=p>,</span><span class=w> </span><span class=n>fifty_one</span><span class=p>,</span><span class=w> </span><span class=mi>33</span><span class=p>,</span><span class=w> </span><span class=mi>41</span><span class=p>,</span><span class=w> </span><span class=mi>99</span><span class=w> </span><span class=p>});</span><span class=w>
</span><span class=w>    </span><span class=k>try</span><span class=w> </span><span class=n>expect</span><span class=p>(</span><span class=n>foo</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>241</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=kr>var</span><span class=w> </span><span class=n>asdf</span><span class=o>:</span><span class=w> </span><span class=kt>f32</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>219.231</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=kr>const</span><span class=w> </span><span class=n>bar</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sum</span><span class=p>(</span><span class=kt>f32</span><span class=p>,</span><span class=w> </span><span class=p>.{</span><span class=w> </span><span class=mf>21.41</span><span class=p>,</span><span class=w> </span><span class=mf>132.111</span><span class=p>,</span><span class=w> </span><span class=mf>521.122224</span><span class=p>,</span><span class=w> </span><span class=n>asdf</span><span class=p>,</span><span class=w> </span><span class=mi>10</span><span class=w> </span><span class=p>});</span><span class=w>
</span><span class=w>    </span><span class=k>try</span><span class=w> </span><span class=n>expect</span><span class=p>(</span><span class=n>bar</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>1000</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>fn</span><span class=w> </span><span class=n>sum</span><span class=p>(</span><span class=kr>comptime</span><span class=w> </span><span class=n>T</span><span class=o>:</span><span class=w> </span><span class=kt>type</span><span class=p>,</span><span class=w> </span><span class=n>args</span><span class=o>:</span><span class=w> </span><span class=n>anytype</span><span class=p>)</span><span class=w> </span><span class=n>T</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=kr>var</span><span class=w> </span><span class=n>answer</span><span class=o>:</span><span class=w> </span><span class=n>T</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=c1>// The trick here is to iterate over the `args` tuple at compile-time.
</span><span class=c1></span><span class=w>    </span><span class=kr>comptime</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=kr>var</span><span class=w> </span><span class=n>i</span><span class=o>:</span><span class=w> </span><span class=kt>usize</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w>        </span><span class=kr>inline</span><span class=w> </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>args</span><span class=p>.</span><span class=n>len</span><span class=p>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=mi>1</span><span class=p>)</span><span class=w>
</span><span class=w>            </span><span class=n>answer</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>args</span><span class=p>[</span><span class=n>i</span><span class=p>];</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>answer</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=p>}</span></code></pre></div></div><div class=window><div class=title>Terminal</div><pre class=terminal>$ zig test function.zig
All 1 tests passed.
$ <span class=blink>█</span></pre></div><p>asdf.</p><div class=window><div class=title>function.zig</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-zig data-lang=zig><span class=kr>const</span><span class=w> </span><span class=n>std</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>@import</span><span class=p>(</span><span class=s>&#34;std&#34;</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=kr>const</span><span class=w> </span><span class=n>expect</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span><span class=p>.</span><span class=n>testing</span><span class=p>.</span><span class=n>expect</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>test</span><span class=w> </span><span class=s>&#34;Variadic function&#34;</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=kr>var</span><span class=w> </span><span class=n>twelve</span><span class=o>:</span><span class=w> </span><span class=kt>u8</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>12</span><span class=p>;</span><span class=w>
</span><span class=w>    </span><span class=kr>var</span><span class=w> </span><span class=n>fifty_one</span><span class=o>:</span><span class=w> </span><span class=kt>u8</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>51</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=kr>const</span><span class=w> </span><span class=n>foo</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sum</span><span class=p>(</span><span class=kt>u8</span><span class=p>,</span><span class=w> </span><span class=p>.{</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=n>twelve</span><span class=p>,</span><span class=w> </span><span class=n>fifty_one</span><span class=p>,</span><span class=w> </span><span class=mi>33</span><span class=p>,</span><span class=w> </span><span class=mi>41</span><span class=p>,</span><span class=w> </span><span class=mi>99</span><span class=w> </span><span class=p>});</span><span class=w>
</span><span class=w>    </span><span class=k>try</span><span class=w> </span><span class=n>expect</span><span class=p>(</span><span class=n>foo</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>241</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=kr>var</span><span class=w> </span><span class=n>asdf</span><span class=o>:</span><span class=w> </span><span class=kt>f32</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>219.231</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=kr>const</span><span class=w> </span><span class=n>bar</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sum</span><span class=p>(</span><span class=kt>f32</span><span class=p>,</span><span class=w> </span><span class=p>.{</span><span class=w> </span><span class=mf>21.41</span><span class=p>,</span><span class=w> </span><span class=mf>132.111</span><span class=p>,</span><span class=w> </span><span class=mf>521.122224</span><span class=p>,</span><span class=w> </span><span class=n>asdf</span><span class=p>,</span><span class=w> </span><span class=mi>10</span><span class=w> </span><span class=p>});</span><span class=w>
</span><span class=w>    </span><span class=k>try</span><span class=w> </span><span class=n>expect</span><span class=p>(</span><span class=n>bar</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>1000</span><span class=p>);</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>fn</span><span class=w> </span><span class=n>sum</span><span class=p>(</span><span class=kr>comptime</span><span class=w> </span><span class=n>T</span><span class=o>:</span><span class=w> </span><span class=kt>type</span><span class=p>,</span><span class=w> </span><span class=n>args</span><span class=o>:</span><span class=w> </span><span class=n>anytype</span><span class=p>)</span><span class=w> </span><span class=n>T</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=kr>const</span><span class=w> </span><span class=n>type_info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>@typeInfo</span><span class=p>(</span><span class=n>T</span><span class=p>);</span><span class=w>
</span><span class=w>    </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=n>type_info</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=p>.</span><span class=n>Int</span><span class=p>,</span><span class=w>
</span><span class=w>        </span><span class=p>.</span><span class=n>Float</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=p>{},</span><span class=w>
</span><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=nb>@compileError</span><span class=p>(</span><span class=s>&#34;Expected integer or floating type, found &#34;</span><span class=w> </span><span class=o>++</span><span class=w> </span><span class=nb>@typeName</span><span class=p>(</span><span class=n>T</span><span class=p>)),</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=kr>const</span><span class=w> </span><span class=n>ArgsType</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>@TypeOf</span><span class=p>(</span><span class=n>args</span><span class=p>);</span><span class=w>
</span><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nb>@typeInfo</span><span class=p>(</span><span class=n>ArgsType</span><span class=p>)</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=p>.</span><span class=n>Struct</span><span class=p>)</span><span class=w>
</span><span class=w>        </span><span class=nb>@compileError</span><span class=p>(</span><span class=s>&#34;Expected tuple or struct, found &#34;</span><span class=w> </span><span class=o>++</span><span class=w> </span><span class=nb>@typeName</span><span class=p>(</span><span class=n>ArgsType</span><span class=p>));</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=kr>const</span><span class=w> </span><span class=n>fields_info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span><span class=p>.</span><span class=n>meta</span><span class=p>.</span><span class=n>fields</span><span class=p>(</span><span class=n>ArgsType</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=kr>var</span><span class=w> </span><span class=n>answer</span><span class=o>:</span><span class=w> </span><span class=n>T</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=kr>comptime</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=kr>var</span><span class=w> </span><span class=n>i</span><span class=o>:</span><span class=w> </span><span class=kt>usize</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w>        </span><span class=kr>inline</span><span class=w> </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>fields_info</span><span class=p>.</span><span class=n>len</span><span class=p>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=mi>1</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>            </span><span class=k>switch</span><span class=w> </span><span class=p>(</span><span class=n>type_info</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>                </span><span class=p>.</span><span class=n>Int</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=n>answer</span><span class=w> </span><span class=o>+%=</span><span class=w> </span><span class=nb>@field</span><span class=p>(</span><span class=n>args</span><span class=p>,</span><span class=w> </span><span class=n>fields_info</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>name</span><span class=p>),</span><span class=w>
</span><span class=w>                </span><span class=p>.</span><span class=n>Float</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=n>answer</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=nb>@field</span><span class=p>(</span><span class=n>args</span><span class=p>,</span><span class=w> </span><span class=n>fields_info</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>name</span><span class=p>),</span><span class=w>
</span><span class=w>                </span><span class=k>else</span><span class=w> </span><span class=o>=&gt;</span><span class=w> </span><span class=k>unreachable</span><span class=p>,</span><span class=w>
</span><span class=w>            </span><span class=p>}</span><span class=w>
</span><span class=w>        </span><span class=p>}</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>answer</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=p>}</span></code></pre></div></div><div class=window><div class=title>Terminal</div><pre class=terminal>$ zig test function.zig
All 1 tests passed.
$ <span class=blink>█</span></pre></div></article></main><footer>Copyright &#169; 2021 -
Bagus <span class=monospace>nofmal</span> Bimasakti
&#183; <a href=../>Home</a>
&#183; <a href=../about/>About</a></footer></body></html>